# Alert钉钉警报服务机器人（所有代码均由个人所写）
## 一种基于分布式的动态规则参数的诊断监控服务与对应的管理系统，面向新环保能源设计的诊断服务<br>
1. 前端：Vue+Iview-UI+Element-UI
2. 后端：SpringBoot+Redis+Mysql+Mybatis+Redisson分布式锁
3. 诊断：SpringBoot+Redis+Mysql+钉钉报警机器人+AMQP阿里云消息队列+Mybatis+Redisson分布式锁
## 规则的流程运转
1. 实时覆盖过来的AMQP消息到Redis中，暂时没用多线程进行处理，因为AMQP的数据量太小
2. 消息队列服务Jar启动时拉去数据库中的数据放到Redis，数据库读写分离
3. 根据消息的Dn机器Key查询符合的规则，在进行多个消息的判断
4. 消息队列服务完全独立，并且基于Reids分布式锁控制多线程并发操作
5. 在Redis中循环遍历key对应队列消息，查询对应的key是否满足在Redis找到所有对应的机器消息
6. 如果规则中的机器参数都可以在Reids中找到，说明可以进行消息比对再决定是否钉钉报警(删除Redis符合的实时信息集合，插入失败的消息到Mysql)
7. 对组合规则进行逻辑判，限定10分钟报警一次
8. 完全基于Reids进行操作，只有发生写操作才动数据库，对一个Redis中的共享字段操作也必须使用分布式锁，独立的Jar
## 流程的例子如下
<code>
例如，技术工程师使用者想判断某一个机器是否是发生报警，这个机器的实时消息均保存在AMQP阿里云中，例如：这条实时消息的参数包含一个机器众多的元数据，电压，水压，气压等等，把他们比如A,B,C三个机器，其中A(a..z),B(a..z),C(a..z)代表每一个机器的众多参数，如果想要计算:(A.a+B.b)>C.c*100，这只是一条规则，允许有多个复合规则一块组成，一个机器会在30秒内传过来一个实时消息，此时，需要对传过来的机器key作为分布式锁的“主键”，增删改查保证不会发生数据不一致，因为两个jar独立开来的，为所有需要用到的jar提供接口服务。
<code>
